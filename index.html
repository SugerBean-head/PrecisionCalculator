<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript ç²¾åº¦è®¡ç®—å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }

        .section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .input-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus, input[type="number"]:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .result {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .error {
            background: #ffeaea;
            border: 1px solid #f44336;
            color: #d32f2f;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .demo-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
        }

        .demo-item h4 {
            color: #4facfe;
            margin-bottom: 10px;
        }

        .demo-item code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .comparison-item {
            padding: 15px;
            border-radius: 8px;
        }

        .native {
            background: #ffebee;
            border: 1px solid #f44336;
        }

        .precision {
            background: #e8f5e8;
            border: 1px solid #4caf50;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§® ç²¾åº¦è®¡ç®—å·¥å…·</h1>
            <p>è§£å†³JavaScriptæµ®ç‚¹æ•°è®¡ç®—ç²¾åº¦é—®é¢˜ï¼Œæ”¯æŒå…¬å¼è®¡ç®—å’Œè´Ÿå·å¤„ç†</p>
        </div>

        <div class="content">
            <!-- åŸºç¡€è¿ç®—æµ‹è¯• -->
            <div class="section">
                <h3>ğŸ”¢ åŸºç¡€è¿ç®—æµ‹è¯•</h3>
                <div class="input-group">
                    <label>æ•°å­— A:</label>
                    <input type="number" id="numA" value="0.1" step="any">
                </div>
                <div class="input-group">
                    <label>æ•°å­— B:</label>
                    <input type="number" id="numB" value="0.2" step="any">
                </div>
                <button class="btn" onclick="testBasicOperations()">æµ‹è¯•åŸºç¡€è¿ç®—</button>
                <div id="basicResult" class="result" style="display: none;"></div>
            </div>

            <!-- å…¬å¼è®¡ç®—æµ‹è¯• -->
            <div class="section">
                <h3>ğŸ“ å…¬å¼è®¡ç®—æµ‹è¯•</h3>
                <div class="input-group">
                    <label>æ•°å­¦è¡¨è¾¾å¼:</label>
                    <input type="text" id="expression" value="-5 + 3 * 2 - 0.1" placeholder="ä¾‹å¦‚: -5 + 3 * 2 - 0.1">
                </div>
                <button class="btn" onclick="testExpression()">è®¡ç®—è¡¨è¾¾å¼</button>
                <button class="btn" onclick="loadExampleExpressions()">åŠ è½½ç¤ºä¾‹</button>
                <div id="expressionResult" class="result" style="display: none;"></div>
            </div>

            <!-- æ‰¹é‡è®¡ç®—æµ‹è¯• -->
            <div class="section">
                <h3>ğŸ“Š æ‰¹é‡è®¡ç®—æµ‹è¯•</h3>
                <button class="btn" onclick="testBatchCalculation()">è¿è¡Œæ‰¹é‡æµ‹è¯•</button>
                <div id="batchResult" class="result" style="display: none;"></div>
            </div>

            <!-- æ•°æ®æ ¼å¼åŒ–æµ‹è¯• -->
            <div class="section">
                <h3>ğŸ¨ æ•°æ®æ ¼å¼åŒ–æµ‹è¯•</h3>
                <div class="input-group">
                    <label>æµ‹è¯•æ•°å€¼:</label>
                    <input type="number" id="formatNum" value="1234.5678" step="any">
                </div>
                <button class="btn" onclick="testFormatting()">æµ‹è¯•æ ¼å¼åŒ–</button>
                <button class="btn" onclick="testPercentage()">æµ‹è¯•ç™¾åˆ†æ¯”</button>
                <button class="btn" onclick="testCurrency()">æµ‹è¯•è´§å¸</button>
                <button class="btn" onclick="testUnits()">æµ‹è¯•å•ä½</button>
                <div id="formatResult" class="result" style="display: none;"></div>
            </div>

            <!-- é“¾å¼è°ƒç”¨æµ‹è¯• -->
            <div class="section">
                <h3>ğŸ”— é“¾å¼è°ƒç”¨æµ‹è¯•</h3>
                <div class="input-group">
                    <label>åˆå§‹å€¼:</label>
                    <input type="number" id="chainInput" value="100" step="any">
                </div>
                <button class="btn" onclick="testChainBasic()">åŸºç¡€é“¾å¼è°ƒç”¨</button>
                <button class="btn" onclick="testChainComplex()">å¤æ‚é“¾å¼è°ƒç”¨</button>
                <button class="btn" onclick="testChainFormat()">é“¾å¼+æ ¼å¼åŒ–</button>
                <div id="chainResult" class="result" style="display: none;"></div>
            </div>

            <!-- æ•°å­¦è¿ç®—æµ‹è¯• -->
            <div class="section">
                <h3>ğŸ§® æ•°å­¦è¿ç®—æµ‹è¯•</h3>
                <div class="input-group">
                    <label>æµ‹è¯•æ•°å€¼:</label>
                    <input type="number" id="mathNum" value="25" step="any">
                </div>
                <div class="input-group">
                    <label>ç¬¬äºŒä¸ªæ•°å€¼ï¼ˆå¹‚è¿ç®—ç”¨ï¼‰:</label>
                    <input type="number" id="mathNum2" value="2" step="any">
                </div>
                <button class="btn" onclick="testSquareRoot()">å¼€å¹³æ–¹æ ¹</button>
                <button class="btn" onclick="testSquareCube()">å¹³æ–¹ç«‹æ–¹</button>
                <button class="btn" onclick="testPowerLog()">å¹‚è¿ç®—å¯¹æ•°</button>
                <button class="btn" onclick="testSpecialMath()">ç‰¹æ®Šè¿ç®—</button>
                <div id="mathResult" class="result" style="display: none;"></div>
            </div>

            <!-- ç²¾åº¦å¯¹æ¯”æ¼”ç¤º -->
            <div class="section">
                <h3>âš–ï¸ ç²¾åº¦å¯¹æ¯”æ¼”ç¤º</h3>
                <button class="btn" onclick="showPrecisionComparison()">æ˜¾ç¤ºç²¾åº¦å¯¹æ¯”</button>
                <div id="comparisonResult" class="result" style="display: none;"></div>
            </div>

            <!-- ä½¿ç”¨ç¤ºä¾‹ -->
            <div class="section">
                <h3>ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹</h3>
                <div class="demo-grid">
                    <div class="demo-item">
                        <h4>åŸºç¡€è¿ç®—</h4>
                        <code>calc.add(0.1, 0.2)</code><br>
                        <code>calc.multiply(0.1, 3)</code><br>
                        <code>calc.divide(10, 3)</code>
                    </div>
                    <div class="demo-item">
                        <h4>å…¬å¼è®¡ç®—</h4>
                        <code>calc.calculate('0.1 + 0.2')</code><br>
                        <code>calc.calculate('-5 + 3 * 2')</code><br>
                        <code>calc.calculate('(0.1 + 0.2) * 3')</code>
                    </div>
                    <div class="demo-item">
                        <h4>æ•°å€¼å–æ•´</h4>
                        <code>calc.round(10.345, 2)</code><br>
                        <code>calc.ceil(10.342, 2)</code><br>
                        <code>calc.floor(10.348, 2)</code>
                    </div>
                    <div class="demo-item">
                        <h4>ç™¾åˆ†æ¯”æ ¼å¼åŒ–</h4>
                        <code>calc.toPercent(0.1256)</code><br>
                        <code>calc.toPercent(0.1256, 1)</code><br>
                        <code>calc.toPercent(0.1256, 2, false)</code>
                    </div>
                    <div class="demo-item">
                        <h4>è´§å¸æ ¼å¼åŒ–</h4>
                        <code>calc.toCurrency(1234.5)</code><br>
                        <code>calc.toCurrency(1234.5, '$')</code><br>
                        <code>calc.toCurrency(1234.5, 'â‚¬', 0)</code>
                    </div>
                    <div class="demo-item">
                        <h4>å•ä½æ ¼å¼åŒ–</h4>
                        <code>calc.toUnit(123.456, 'kg')</code><br>
                        <code>calc.toUnit(123.456, 'mÂ²', 1)</code><br>
                        <code>calc.toReadable(12345)</code>
                    </div>
                    <div class="demo-item">
                        <h4>ç‰¹æ®Šæ ¼å¼åŒ–</h4>
                        <code>calc.toScientific(123456)</code><br>
                        <code>calc.toFraction(0.5)</code><br>
                        <code>calc.toFraction(1.25)</code>
                    </div>
                    <div class="demo-item">
                        <h4>ç²¾åº¦æ§åˆ¶</h4>
                        <code>calc.setPrecision(2)</code><br>
                        <code>calc.format(10/3, 4)</code><br>
                        <code>calc.format(result)</code>
                    </div>
                    <div class="demo-item">
                        <h4>å¹³æ–¹æ ¹è¿ç®—</h4>
                        <code>calc.sqrt(25)</code><br>
                        <code>calc.cbrt(27)</code><br>
                        <code>calc.square(5)</code>
                    </div>
                    <div class="demo-item">
                        <h4>å¹‚è¿ç®—</h4>
                        <code>calc.pow(2, 3)</code><br>
                        <code>calc.cube(3)</code><br>
                        <code>calc.reciprocal(4)</code>
                    </div>
                    <div class="demo-item">
                        <h4>å¯¹æ•°è¿ç®—</h4>
                        <code>calc.log10(100)</code><br>
                        <code>calc.ln(Math.E)</code><br>
                        <code>calc.exp(2)</code>
                    </div>
                    <div class="demo-item">
                        <h4>ç‰¹æ®Šè¿ç®—</h4>
                        <code>calc.abs(-5)</code><br>
                        <code>calc.factorial(5)</code><br>
                        <code>calc.percentage(25)</code>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="mathfix.js"></script>
    <script>
        // æµ‹è¯•åŸºç¡€è¿ç®—
        function testBasicOperations() {
            const numA = parseFloat(document.getElementById('numA').value);
            const numB = parseFloat(document.getElementById('numB').value);
            
            const results = [
                `è¾“å…¥: A = ${numA}, B = ${numB}`,
                '',
                '=== ç²¾åº¦è®¡ç®—ç»“æœ ===',
                `åŠ æ³•: ${numA} + ${numB} = ${calc.add(numA, numB)}`,
                `å‡æ³•: ${numA} - ${numB} = ${calc.subtract(numA, numB)}`,
                `ä¹˜æ³•: ${numA} Ã— ${numB} = ${calc.multiply(numA, numB)}`,
                `é™¤æ³•: ${numA} Ã· ${numB} = ${calc.divide(numA, numB)}`,
                '',
                '=== åŸç”ŸJavaScriptç»“æœ ===',
                `åŠ æ³•: ${numA} + ${numB} = ${numA + numB}`,
                `å‡æ³•: ${numA} - ${numB} = ${numA - numB}`,
                `ä¹˜æ³•: ${numA} Ã— ${numB} = ${numA * numB}`,
                `é™¤æ³•: ${numA} Ã· ${numB} = ${numA / numB}`
            ];
            
            showResult('basicResult', results.join('\n'));
        }

        // æµ‹è¯•è¡¨è¾¾å¼è®¡ç®—
        function testExpression() {
            const expression = document.getElementById('expression').value;
            
            try {
                const result = calc.calculate(expression);
                const nativeResult = eval(expression);
                
                const results = [
                    `è¡¨è¾¾å¼: ${expression}`,
                    '',
                    `ç²¾åº¦è®¡ç®—ç»“æœ: ${result}`,
                    `åŸç”ŸJavaScriptç»“æœ: ${nativeResult}`,
                    '',
                    `å·®å¼‚: ${Math.abs(result - nativeResult) < 1e-10 ? 'æ— å·®å¼‚' : 'å­˜åœ¨ç²¾åº¦å·®å¼‚'}`
                ];
                
                showResult('expressionResult', results.join('\n'));
            } catch (error) {
                showResult('expressionResult', `é”™è¯¯: ${error.message}`, true);
            }
        }

        // åŠ è½½ç¤ºä¾‹è¡¨è¾¾å¼
        function loadExampleExpressions() {
            const examples = [
                '0.1 + 0.2',
                '0.1 * 3',
                '-5 + 3 * 2',
                '-(5 + 3) * 2',
                '(0.1 + 0.2) * 3 - 0.5',
                '10 / 3 + 0.1',
                '-10 + 5 * 2'
            ];
            
            const randomExample = examples[Math.floor(Math.random() * examples.length)];
            document.getElementById('expression').value = randomExample;
        }

        // æ‰¹é‡è®¡ç®—æµ‹è¯•
        function testBatchCalculation() {
            const expressions = [
                '0.1 + 0.2',
                '0.1 * 3',
                '10 / 3',
                '-5 + 3',
                '(0.1 + 0.2) * 3',
                '-(5 + 3) / 2',
                '0.1 + 0.2 + 0.3'
            ];
            
            const results = ['=== æ‰¹é‡è®¡ç®—ç»“æœ ===', ''];
            
            expressions.forEach((expr, index) => {
                try {
                    const result = calc.calculate(expr);
                    const nativeResult = eval(expr);
                    results.push(`${index + 1}. ${expr}`);
                    results.push(`   ç²¾åº¦è®¡ç®—: ${result}`);
                    results.push(`   åŸç”Ÿè®¡ç®—: ${nativeResult}`);
                    results.push(`   å·®å¼‚: ${Math.abs(result - nativeResult) < 1e-10 ? 'âœ“ æ— å·®å¼‚' : 'âœ— å­˜åœ¨å·®å¼‚'}`);
                    results.push('');
                } catch (error) {
                    results.push(`${index + 1}. ${expr} - é”™è¯¯: ${error.message}`);
                    results.push('');
                }
            });
            
            showResult('batchResult', results.join('\n'));
        }

        // æµ‹è¯•æ•°æ®æ ¼å¼åŒ–
        function testFormatting() {
            const num = parseFloat(document.getElementById('formatNum').value);
            
            const results = [
                `è¾“å…¥æ•°å€¼: ${num}`,
                '',
                '=== æ•°å€¼å–æ•´å’Œèˆå…¥ ===',
                `å››èˆäº”å…¥(2ä½å°æ•°): ${calc.round(num, 2)}`,
                `å‘ä¸Šå–æ•´(2ä½å°æ•°): ${calc.ceil(num, 2)}`,
                `å‘ä¸‹å–æ•´(2ä½å°æ•°): ${calc.floor(num, 2)}`,
                `å››èˆäº”å…¥(æ•´æ•°): ${calc.round(num)}`,
                `å‘ä¸Šå–æ•´(æ•´æ•°): ${calc.ceil(num)}`,
                `å‘ä¸‹å–æ•´(æ•´æ•°): ${calc.floor(num)}`,
                '',
                '=== ç‰¹æ®Šæ ¼å¼åŒ– ===',
                `ç§‘å­¦è®¡æ•°æ³•(2ä½å°æ•°): ${calc.toScientific(num, 2)}`,
                `åˆ†æ•°å½¢å¼: ${calc.toFraction(num / 10)}`,
                `å¯è¯»æ€§æ ¼å¼åŒ–(ä¸­æ–‡): ${calc.toReadable(num * 1000)}`,
                `å¯è¯»æ€§æ ¼å¼åŒ–(è‹±æ–‡): ${calc.toReadable(num * 1000, 2, 'en')}`
            ];
            
            showResult('formatResult', results.join('\n'));
        }

        // æµ‹è¯•ç™¾åˆ†æ¯”æ ¼å¼åŒ–
        function testPercentage() {
            const num = parseFloat(document.getElementById('formatNum').value) / 100;
            
            const results = [
                `è¾“å…¥æ•°å€¼(å°æ•°å½¢å¼): ${num}`,
                '',
                '=== ç™¾åˆ†æ¯”æ ¼å¼åŒ– ===',
                `é»˜è®¤æ ¼å¼(2ä½å°æ•°): ${calc.toPercent(num)}`,
                `1ä½å°æ•°: ${calc.toPercent(num, 1)}`,
                `0ä½å°æ•°: ${calc.toPercent(num, 0)}`,
                `æ— ç™¾åˆ†å·(2ä½å°æ•°): ${calc.toPercent(num, 2, false)}`,
                '',
                '=== ä¸åŒæ•°å€¼ç¤ºä¾‹ ===',
                `0.005 â†’ ${calc.toPercent(0.005)}`,
                `0.075 â†’ ${calc.toPercent(0.075)}`,
                `0.25 â†’ ${calc.toPercent(0.25)}`,
                `1.0 â†’ ${calc.toPercent(1.0)}`
            ];
            
            showResult('formatResult', results.join('\n'));
        }

        // æµ‹è¯•è´§å¸æ ¼å¼åŒ–
        function testCurrency() {
            const num = parseFloat(document.getElementById('formatNum').value);
            
            const results = [
                `è¾“å…¥æ•°å€¼: ${num}`,
                '',
                '=== è´§å¸æ ¼å¼åŒ– ===',
                `äººæ°‘å¸(é»˜è®¤): ${calc.toCurrency(num)}`,
                `ç¾å…ƒ: ${calc.toCurrency(num, '$')}`,
                `æ¬§å…ƒ: ${calc.toCurrency(num, 'â‚¬')}`,
                `è‹±é•‘: ${calc.toCurrency(num, 'Â£')}`,
                `æ—¥å…ƒ: ${calc.toCurrency(num, 'Â¥', 0)}`,
                '',
                '=== æ ¼å¼é€‰é¡¹ ===',
                `æ— åƒåˆ†ä½: ${calc.toCurrency(num, 'Â¥', 2, false)}`,
                `0ä½å°æ•°: ${calc.toCurrency(num, 'Â¥', 0)}`,
                `3ä½å°æ•°: ${calc.toCurrency(num, 'Â¥', 3)}`
            ];
            
            showResult('formatResult', results.join('\n'));
        }

        // æµ‹è¯•å•ä½æ ¼å¼åŒ–
        function testUnits() {
            const num = parseFloat(document.getElementById('formatNum').value);
            
            const results = [
                `è¾“å…¥æ•°å€¼: ${num}`,
                '',
                '=== å•ä½æ ¼å¼åŒ– ===',
                `é‡é‡: ${calc.toUnit(num, 'kg')}`,
                `é¢ç§¯: ${calc.toUnit(num, 'mÂ²')}`,
                `ä½“ç§¯: ${calc.toUnit(num, 'L')}`,
                `æ¸©åº¦: ${calc.toUnit(num, 'Â°C')}`,
                `ç™¾åˆ†æ¯”: ${calc.toUnit(num, '%')}`,
                '',
                '=== å¤§æ•°å­—æ ¼å¼åŒ– ===',
                `åƒ: ${calc.toReadable(num * 1000)}`,
                `ä¸‡: ${calc.toReadable(num * 10000)}`,
                `äº¿: ${calc.toReadable(num * 100000000)}`,
                `è‹±æ–‡åƒ: ${calc.toReadable(num * 1000, 1, 'en')}`,
                `è‹±æ–‡ç™¾ä¸‡: ${calc.toReadable(num * 1000000, 1, 'en')}`
            ];
            
            showResult('formatResult', results.join('\n'));
        }

        // é“¾å¼è°ƒç”¨æµ‹è¯•å‡½æ•°
        function testChainBasic() {
            const value = parseFloat(document.getElementById('chainInput').value) || 100;
            const results = [
                `åˆå§‹å€¼: ${value}`,
                `é“¾å¼è°ƒç”¨: ${value} â†’ add(10) â†’ multiply(2) â†’ subtract(5)`,
                `ç»“æœ: ${calc.chain(value).add(10).multiply(2).subtract(5).valueOf()}`,
                ``,
                `ç²¾åº¦è®¡ç®—: 0.1 â†’ add(0.2) â†’ multiply(3) â†’ round(2)`,
                `ç»“æœ: ${calc.chain(0.1).add(0.2).multiply(3).round(2).valueOf()}`
            ];
            showResult('chainResult', results.join('\n'));
        }

        function testChainComplex() {
            const value = parseFloat(document.getElementById('chainInput').value) || 100;
            const results = [
                `å¤æ‚é“¾å¼è°ƒç”¨æ¼”ç¤º:`,
                `åˆå§‹å€¼: ${value}`,
                `æ­¥éª¤: multiply(1.08) â†’ add(50) â†’ divide(3) â†’ round(2)`,
                `ç»“æœ: ${calc.chain(value).multiply(1.08).add(50).divide(3).round(2).valueOf()}`,
                ``,
                `ç¨è´¹è®¡ç®—ç¤ºä¾‹:`,
                `å•†å“ä»·æ ¼: 999.99`,
                `æ­¥éª¤: multiply(1.13) â†’ round(2) (å«13%ç¨)`,
                `ç»“æœ: ${calc.chain(999.99).multiply(1.13).round(2).valueOf()}`
            ];
            showResult('chainResult', results.join('\n'));
        }

        function testChainFormat() {
            const value = parseFloat(document.getElementById('chainInput').value) || 100;
            const results = [
                `é“¾å¼è°ƒç”¨ + æ ¼å¼åŒ–æ¼”ç¤º:`,
                `åˆå§‹å€¼: ${value}`,
                ``,
                `è´§å¸æ ¼å¼åŒ–: ${calc.chain(value).multiply(1.08).round(2).toCurrency('$')}`,
                `ç™¾åˆ†æ¯”æ ¼å¼åŒ–: ${calc.chain(0.1256).multiply(100).round(1).toPercent(1)}`,
                `å•ä½æ ¼å¼åŒ–: ${calc.chain(value).divide(10).round(1).toUnit('kg')}`,
                ``,
                `å¤æ‚ç¤ºä¾‹ - æŠ•èµ„æ”¶ç›Š:`,
                `æœ¬é‡‘: ${value} â†’ å¹´åŒ–8% â†’ 3å¹´å¤åˆ©`,
                `ç»“æœ: ${calc.chain(value).multiply(1.08).multiply(1.08).multiply(1.08).round(2).toCurrency('Â¥')}`
            ];
            showResult('chainResult', results.join('\n'));
        }

        // æµ‹è¯•å¼€å¹³æ–¹æ ¹å’Œç«‹æ–¹æ ¹
        function testSquareRoot() {
            const num = parseFloat(document.getElementById('mathNum').value);
            
            const results = [
                `è¾“å…¥æ•°å€¼: ${num}`,
                '',
                '=== å¼€æ–¹è¿ç®— ===',
                `å¹³æ–¹æ ¹: âˆš${num} = ${calc.sqrt(num)}`,
                `ç«‹æ–¹æ ¹: âˆ›${num} = ${calc.cbrt(num)}`,
                '',
                '=== éªŒè¯ ===',
                `${calc.sqrt(num)}Â² = ${calc.square(calc.sqrt(num))}`,
                `${calc.cbrt(num)}Â³ = ${calc.cube(calc.cbrt(num))}`,
                '',
                '=== ç‰¹æ®Šå€¼ ===',
                `âˆš4 = ${calc.sqrt(4)}`,
                `âˆš9 = ${calc.sqrt(9)}`,
                `âˆ›8 = ${calc.cbrt(8)}`,
                `âˆ›27 = ${calc.cbrt(27)}`
            ];
            
            showResult('mathResult', results.join('\n'));
        }

        // æµ‹è¯•å¹³æ–¹å’Œç«‹æ–¹
        function testSquareCube() {
            const num = parseFloat(document.getElementById('mathNum').value);
            
            const results = [
                `è¾“å…¥æ•°å€¼: ${num}`,
                '',
                '=== å¹³æ–¹ç«‹æ–¹è¿ç®— ===',
                `å¹³æ–¹: ${num}Â² = ${calc.square(num)}`,
                `ç«‹æ–¹: ${num}Â³ = ${calc.cube(num)}`,
                '',
                '=== å°æ•°æµ‹è¯• ===',
                `0.5Â² = ${calc.square(0.5)}`,
                `0.5Â³ = ${calc.cube(0.5)}`,
                `1.5Â² = ${calc.square(1.5)}`,
                `1.5Â³ = ${calc.cube(1.5)}`,
                '',
                '=== è´Ÿæ•°æµ‹è¯• ===',
                `(-3)Â² = ${calc.square(-3)}`,
                `(-3)Â³ = ${calc.cube(-3)}`
            ];
            
            showResult('mathResult', results.join('\n'));
        }

        // æµ‹è¯•å¹‚è¿ç®—å’Œå¯¹æ•°
        function testPowerLog() {
            const base = parseFloat(document.getElementById('mathNum').value);
            const exponent = parseFloat(document.getElementById('mathNum2').value);
            
            const results = [
                `åº•æ•°: ${base}, æŒ‡æ•°: ${exponent}`,
                '',
                '=== å¹‚è¿ç®— ===',
                `${base}^${exponent} = ${calc.pow(base, exponent)}`,
                `2^3 = ${calc.pow(2, 3)}`,
                `10^2 = ${calc.pow(10, 2)}`,
                `2^(-1) = ${calc.pow(2, -1)}`,
                '',
                '=== å¯¹æ•°è¿ç®— ===',
                `logâ‚â‚€(100) = ${calc.log10(100)}`,
                `logâ‚â‚€(1000) = ${calc.log10(1000)}`,
                `ln(e) = ${calc.ln(Math.E)}`,
                `ln(1) = ${calc.ln(1)}`,
                '',
                '=== æŒ‡æ•°å‡½æ•° ===',
                `e^1 = ${calc.exp(1)}`,
                `e^0 = ${calc.exp(0)}`,
                `e^2 = ${calc.exp(2)}`
            ];
            
            showResult('mathResult', results.join('\n'));
        }

        // æµ‹è¯•ç‰¹æ®Šæ•°å­¦è¿ç®—
        function testSpecialMath() {
            const num = parseFloat(document.getElementById('mathNum').value);
            
            const results = [
                `è¾“å…¥æ•°å€¼: ${num}`,
                '',
                '=== ç»å¯¹å€¼ ===',
                `|${num}| = ${calc.abs(num)}`,
                `|-5| = ${calc.abs(-5)}`,
                `|3.14| = ${calc.abs(3.14)}`,
                '',
                '=== å€’æ•° ===',
                `1/${num} = ${calc.reciprocal(num)}`,
                `1/2 = ${calc.reciprocal(2)}`,
                `1/0.5 = ${calc.reciprocal(0.5)}`,
                '',
                '=== é˜¶ä¹˜ ===',
                `5! = ${calc.factorial(5)}`,
                `0! = ${calc.factorial(0)}`,
                `3! = ${calc.factorial(3)}`,
                '',
                '=== ç™¾åˆ†æ¯”è½¬æ¢ ===',
                `${num}% = ${calc.percentage(num)}`,
                `50% = ${calc.percentage(50)}`,
                `25% = ${calc.percentage(25)}`
            ];
            
            showResult('mathResult', results.join('\n'));
        }

        // æ˜¾ç¤ºç²¾åº¦å¯¹æ¯”
        function showPrecisionComparison() {
            const testCases = [
                { expr: '0.1 + 0.2', desc: 'ç»å…¸æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜' },
                { expr: '0.1 * 3', desc: 'å°æ•°ä¹˜æ³•ç²¾åº¦é—®é¢˜' },
                { expr: '0.3 - 0.1', desc: 'å°æ•°å‡æ³•ç²¾åº¦é—®é¢˜' },
                { expr: '1.4 * 3', desc: 'è¾ƒå¤§å°æ•°ä¹˜æ³•' },
                { expr: '0.1 + 0.2 + 0.3', desc: 'å¤šé¡¹å°æ•°åŠ æ³•' }
            ];
            
            let html = '<div class="comparison">';
            html += '<div class="comparison-item native"><h4>âŒ åŸç”ŸJavaScript</h4>';
            html += '<div>';
            
            testCases.forEach(test => {
                const nativeResult = eval(test.expr);
                html += `<p><strong>${test.desc}</strong><br>`;
                html += `${test.expr} = ${nativeResult}</p>`;
            });
            
            html += '</div></div>';
            html += '<div class="comparison-item precision"><h4>âœ… ç²¾åº¦è®¡ç®—å·¥å…·</h4>';
            html += '<div>';
            
            testCases.forEach(test => {
                const precisionResult = calc.calculate(test.expr);
                html += `<p><strong>${test.desc}</strong><br>`;
                html += `${test.expr} = ${precisionResult}</p>`;
            });
            
            html += '</div></div></div>';
            
            document.getElementById('comparisonResult').innerHTML = html;
            document.getElementById('comparisonResult').style.display = 'block';
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(elementId, content, isError = false) {
            const element = document.getElementById(elementId);
            element.textContent = content;
            element.className = isError ? 'result error' : 'result';
            element.style.display = 'block';
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ç²¾åº¦è®¡ç®—å·¥å…·å·²åŠ è½½');
            console.log('å¯ä»¥ä½¿ç”¨ calc å¯¹è±¡è¿›è¡Œè®¡ç®—');
            console.log('ç¤ºä¾‹: calc.calculate("0.1 + 0.2")');
        });
    </script>
</body>
</html>